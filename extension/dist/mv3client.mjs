// scripts/client.ts
console.debug("[vite] connecting...");
var socketProtocol = location.protocol === "https:" ? "wss" : "ws";
var socketHost = "localhost:3303";
var base = "/";
var messageBuffer = [];
var enableOverlay = true;
var hotModulesMap = /* @__PURE__ */ new Map();
var disposeMap = /* @__PURE__ */ new Map();
var pruneMap = /* @__PURE__ */ new Map();
var dataMap = /* @__PURE__ */ new Map();
var customListenersMap = /* @__PURE__ */ new Map();
var ctxToListenersMap = /* @__PURE__ */ new Map();
var socket;
try {
  socket = new WebSocket(`${socketProtocol}://${socketHost}`, "vite-hmr");
  socket.addEventListener("message", async ({ data }) => {
    handleMessage(JSON.parse(data));
  });
  socket.addEventListener("close", async ({ wasClean }) => {
    if (wasClean)
      return;
    console.log("[vite] server connection lost. polling for restart...");
    await waitForSuccessfulPing();
    location.reload();
  });
} catch (error) {
  console.error(`[vite] failed to connect to websocket (${error}). `);
}
function warnFailedFetch(err, path) {
  if (!err.message.match("fetch"))
    console.error(err);
  console.error(
    `[hmr] Failed to reload ${path}. This could be due to syntax errors or importing non-existent modules. (see errors above)`
  );
}
function cleanUrl(pathname) {
  const url = new URL(pathname, location.toString());
  url.searchParams.delete("direct");
  return url.pathname + url.search;
}
var isFirstUpdate = true;
async function handleMessage(payload) {
  switch (payload.type) {
    case "connected":
      console.debug("[vite] connected.");
      sendMessageBuffer();
      setInterval(() => socket.send('{"type":"ping"}'), 5e3);
      break;
    case "update":
      notifyListeners("vite:beforeUpdate", payload);
      if (isFirstUpdate && hasErrorOverlay()) {
        window.location.reload();
        return;
      } else {
        clearErrorOverlay();
        isFirstUpdate = false;
      }
      payload.updates.forEach((update) => {
        if (update.type === "js-update") {
          queueUpdate(fetchUpdate(update));
        } else {
          const { path, timestamp } = update;
          const searchUrl = cleanUrl(path);
          const el = Array.from(document.querySelectorAll("link")).find(
            (e) => cleanUrl(e.href).includes(searchUrl)
          );
          if (el) {
            const newPath = `${base}${searchUrl.slice(1)}${searchUrl.includes("?") ? "&" : "?"}t=${timestamp}`;
            el.href = new URL(newPath, el.href).href;
          }
          console.log(`[vite] css hot updated: ${searchUrl}`);
        }
      });
      break;
    case "custom": {
      notifyListeners(payload.event, payload.data);
      break;
    }
    case "full-reload":
      notifyListeners("vite:beforeFullReload", payload);
      if (payload.path && payload.path.endsWith(".html")) {
        const pagePath = decodeURI(location.pathname);
        const payloadPath = base + payload.path.slice(1);
        if (pagePath === payloadPath || payload.path === "/index.html" || pagePath.endsWith("/") && `${pagePath}index.html` === payloadPath)
          location.reload();
      } else {
        location.reload();
      }
      break;
    case "prune":
      notifyListeners("vite:beforePrune", payload);
      payload.paths.forEach((path) => {
        const fn = pruneMap.get(path);
        if (fn)
          fn(dataMap.get(path));
      });
      break;
    case "error": {
      notifyListeners("vite:error", payload);
      const err = payload.err;
      if (enableOverlay)
        createErrorOverlay(err);
      else
        console.error(`[vite] Internal Server Error
${err.message}
${err.stack}`);
      break;
    }
    default: {
      const check = payload;
      return check;
    }
  }
}
function notifyListeners(event, data) {
  const cbs = customListenersMap.get(event);
  if (cbs)
    cbs.forEach((cb) => cb(data));
}
function createErrorOverlay(_err) {
  if (!enableOverlay)
    return;
  clearErrorOverlay();
}
function clearErrorOverlay() {
}
function hasErrorOverlay() {
  return false;
}
var pending = false;
var queued = [];
async function queueUpdate(p) {
  queued.push(p);
  if (!pending) {
    pending = true;
    await Promise.resolve();
    pending = false;
    const loading = [...queued];
    queued = [];
    (await Promise.all(loading)).forEach((fn) => fn && fn());
  }
}
async function waitForSuccessfulPing(ms = 1e3) {
  while (true) {
    try {
      await fetch(`${location.protocol}//${socketHost}`);
      break;
    } catch (e) {
      await new Promise((resolve) => setTimeout(resolve, ms));
    }
  }
}
var supportsConstructedSheet = (() => {
  return false;
})();
var sheetsMap = /* @__PURE__ */ new Map();
function updateStyle(id, content) {
  let style = sheetsMap.get(id);
  if (supportsConstructedSheet && !content.includes("@import")) {
    if (style && !(style instanceof CSSStyleSheet)) {
      removeStyle(id);
      style = void 0;
    }
    if (!style) {
      style = new CSSStyleSheet();
      style.replaceSync(content);
      document.adoptedStyleSheets = [...document.adoptedStyleSheets, style];
    } else {
      style.replaceSync(content);
    }
  } else {
    if (style && !(style instanceof HTMLStyleElement)) {
      removeStyle(id);
      style = void 0;
    }
    if (!style) {
      style = document.createElement("style");
      style.setAttribute("type", "text/css");
      style.innerHTML = content;
      document.head.appendChild(style);
    } else {
      style.innerHTML = content;
    }
  }
  sheetsMap.set(id, style);
}
function removeStyle(id) {
  const style = sheetsMap.get(id);
  if (style) {
    if (style instanceof CSSStyleSheet)
      document.adoptedStyleSheets = document.adoptedStyleSheets.filter(
        (s) => s !== style
      );
    else
      document.head.removeChild(style);
    sheetsMap.delete(id);
  }
}
async function fetchUpdate({ path, acceptedPath, timestamp }) {
  let mod = hotModulesMap.get(path);
  if (!mod) {
    mod = hotModulesMap.get(path.replace(/\.js$/, ""));
    if (!mod) {
      return;
    }
    path = path.replace(/\.js$/, "");
    acceptedPath = acceptedPath.replace(/\.js$/, "");
  }
  const moduleMap = /* @__PURE__ */ new Map();
  const isSelfUpdate = path === acceptedPath;
  const modulesToUpdate = /* @__PURE__ */ new Set();
  if (isSelfUpdate) {
    modulesToUpdate.add(path);
  } else {
    for (const { deps } of mod.callbacks) {
      deps.forEach((dep) => {
        if (acceptedPath === dep)
          modulesToUpdate.add(dep);
      });
    }
  }
  const qualifiedCallbacks = mod.callbacks.filter(({ deps }) => {
    return deps.some((dep) => modulesToUpdate.has(dep));
  });
  await Promise.all(
    Array.from(modulesToUpdate).map(async (dep) => {
      const disposer = disposeMap.get(dep);
      if (disposer)
        await disposer(dataMap.get(dep));
      const [path2, query] = dep.split("?");
      try {
        const newMod = await import(
          /* @vite-ignore */
          normalizeScriptUrl(`${base + path2.slice(1)}.js${query ? `_${query}` : ""}`, timestamp)
        );
        moduleMap.set(dep, newMod);
      } catch (e) {
        warnFailedFetch(e, dep);
      }
    })
  );
  return () => {
    for (const { deps, fn } of qualifiedCallbacks)
      fn(deps.map((dep) => moduleMap.get(dep)));
    const loggedPath = isSelfUpdate ? path : `${acceptedPath} via ${path}`;
    console.log(`[vite] hot updated: ${loggedPath}`);
  };
}
function normalizeScriptUrl(url, timestamp) {
  if (!url.endsWith(".js") && !url.endsWith(".mjs"))
    url = `${url}.js`;
  return `${url}?t=${timestamp}`;
}
function sendMessageBuffer() {
  if (socket.readyState === 1) {
    messageBuffer.forEach((msg) => socket.send(msg));
    messageBuffer.length = 0;
  }
}
function createHotContext(ownerPath) {
  if (!dataMap.has(ownerPath))
    dataMap.set(ownerPath, {});
  const mod = hotModulesMap.get(ownerPath);
  if (mod)
    mod.callbacks = [];
  const staleListeners = ctxToListenersMap.get(ownerPath);
  if (staleListeners) {
    for (const [event, staleFns] of staleListeners) {
      const listeners = customListenersMap.get(event);
      if (listeners) {
        customListenersMap.set(
          event,
          listeners.filter((l) => !staleFns.includes(l))
        );
      }
    }
  }
  const newListeners = /* @__PURE__ */ new Map();
  ctxToListenersMap.set(ownerPath, newListeners);
  function acceptDeps(deps, callback = () => {
  }) {
    const mod2 = hotModulesMap.get(ownerPath) || {
      id: ownerPath,
      callbacks: []
    };
    mod2.callbacks.push({
      deps,
      fn: callback
    });
    hotModulesMap.set(ownerPath, mod2);
  }
  const hot = {
    get data() {
      console.log("ViteHotContext data", { dataMap, ownerPath });
      return dataMap.get(ownerPath);
    },
    accept(deps, callback) {
      if (typeof deps === "function" || !deps) {
        acceptDeps([ownerPath], ([mod2]) => deps && deps(mod2));
      } else if (typeof deps === "string") {
        acceptDeps([deps], ([mod2]) => callback && callback(mod2));
      } else if (Array.isArray(deps)) {
        acceptDeps(deps, callback);
      } else {
        throw new TypeError("invalid hot.accept() usage.");
      }
    },
    dispose(cb) {
      disposeMap.set(ownerPath, cb);
    },
    // @ts-expect-error untyped
    prune(cb) {
      pruneMap.set(ownerPath, cb);
    },
    // TODO
    decline() {
    },
    invalidate() {
      location.reload();
    },
    // custom events
    on(event, cb) {
      const addToMap = (map) => {
        const existing = map.get(event) || [];
        existing.push(cb);
        map.set(event, existing);
      };
      addToMap(customListenersMap);
      addToMap(newListeners);
    },
    send(event, data) {
      messageBuffer.push(JSON.stringify({ type: "custom", event, data }));
      sendMessageBuffer();
    }
  };
  return hot;
}
function injectQuery(url, queryToInject) {
  if (!url.startsWith(".") && !url.startsWith("/"))
    return url;
  const pathname = url.replace(/#.*$/, "").replace(/\?.*$/, "");
  const { search, hash } = new URL(url, "http://vitejs.dev");
  return `${pathname}?${queryToInject}${search ? `&${search.slice(1)}` : ""}${hash || ""}`;
}
export {
  createHotContext,
  injectQuery,
  removeStyle,
  updateStyle
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vc2NyaXB0cy9jbGllbnQudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB0eXBlIHsgRXJyb3JQYXlsb2FkLCBITVJQYXlsb2FkLCBVcGRhdGUgfSBmcm9tICd2aXRlJ1xuaW1wb3J0IHR5cGUgeyBWaXRlSG90Q29udGV4dCB9IGZyb20gJ3ZpdGUvdHlwZXMvaG90J1xuaW1wb3J0IHR5cGUgeyBJbmZlckN1c3RvbUV2ZW50UGF5bG9hZCB9IGZyb20gJ3ZpdGUvdHlwZXMvY3VzdG9tRXZlbnQnXG4vLyBWaXRlIHYzIGRvZXNuJ3QgZXhwb3J0IG92ZXJsYXlcbi8vIGltcG9ydCB7IEVycm9yT3ZlcmxheSwgb3ZlcmxheUlkIH0gZnJvbSAndml0ZS9zcmMvY2xpZW50L292ZXJsYXknXG5cbmNvbnNvbGUuZGVidWcoJ1t2aXRlXSBjb25uZWN0aW5nLi4uJylcblxuLy8gdXNlIHNlcnZlciBjb25maWd1cmF0aW9uLCB0aGVuIGZhbGxiYWNrIHRvIGluZmVyZW5jZVxuY29uc3Qgc29ja2V0UHJvdG9jb2wgPSBsb2NhdGlvbi5wcm90b2NvbCA9PT0gJ2h0dHBzOicgPyAnd3NzJyA6ICd3cydcbmNvbnN0IHNvY2tldEhvc3QgPSAnbG9jYWxob3N0OjMzMDMnXG5jb25zdCBiYXNlID0gJy8nXG5jb25zdCBtZXNzYWdlQnVmZmVyOiBzdHJpbmdbXSA9IFtdXG5jb25zdCBlbmFibGVPdmVybGF5ID0gdHJ1ZVxuXG5jb25zdCBob3RNb2R1bGVzTWFwID0gbmV3IE1hcDxzdHJpbmcsIEhvdE1vZHVsZT4oKVxuY29uc3QgZGlzcG9zZU1hcCA9IG5ldyBNYXA8c3RyaW5nLCAoZGF0YTogYW55KSA9PiB2b2lkIHwgUHJvbWlzZTx2b2lkPj4oKVxuY29uc3QgcHJ1bmVNYXAgPSBuZXcgTWFwPHN0cmluZywgKGRhdGE6IGFueSkgPT4gdm9pZCB8IFByb21pc2U8dm9pZD4+KClcbmNvbnN0IGRhdGFNYXAgPSBuZXcgTWFwPHN0cmluZywgYW55PigpXG5jb25zdCBjdXN0b21MaXN0ZW5lcnNNYXAgPSBuZXcgTWFwPHN0cmluZywgKChkYXRhOiBhbnkpID0+IHZvaWQpW10+KClcbmNvbnN0IGN0eFRvTGlzdGVuZXJzTWFwID0gbmV3IE1hcDxzdHJpbmcsIE1hcDxzdHJpbmcsICgoZGF0YTogYW55KSA9PiB2b2lkKVtdPj4oKVxuXG5sZXQgc29ja2V0OiBXZWJTb2NrZXRcbnRyeSB7XG4gIHNvY2tldCA9IG5ldyBXZWJTb2NrZXQoYCR7c29ja2V0UHJvdG9jb2x9Oi8vJHtzb2NrZXRIb3N0fWAsICd2aXRlLWhtcicpXG5cbiAgLy8gTGlzdGVuIGZvciBtZXNzYWdlc1xuICBzb2NrZXQuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGFzeW5jICh7IGRhdGEgfSkgPT4ge1xuICAgIGhhbmRsZU1lc3NhZ2UoSlNPTi5wYXJzZShkYXRhKSlcbiAgfSlcblxuICAvLyBwaW5nIHNlcnZlclxuICBzb2NrZXQuYWRkRXZlbnRMaXN0ZW5lcignY2xvc2UnLCBhc3luYyAoeyB3YXNDbGVhbiB9KSA9PiB7XG4gICAgaWYgKHdhc0NsZWFuKSByZXR1cm5cbiAgICBjb25zb2xlLmxvZygnW3ZpdGVdIHNlcnZlciBjb25uZWN0aW9uIGxvc3QuIHBvbGxpbmcgZm9yIHJlc3RhcnQuLi4nKVxuICAgIGF3YWl0IHdhaXRGb3JTdWNjZXNzZnVsUGluZygpXG4gICAgbG9jYXRpb24ucmVsb2FkKClcbiAgfSlcbn0gY2F0Y2ggKGVycm9yKSB7XG4gIGNvbnNvbGUuZXJyb3IoYFt2aXRlXSBmYWlsZWQgdG8gY29ubmVjdCB0byB3ZWJzb2NrZXQgKCR7ZXJyb3J9KS4gYClcbn1cblxuZnVuY3Rpb24gd2FybkZhaWxlZEZldGNoKGVycjogRXJyb3IsIHBhdGg6IHN0cmluZyB8IHN0cmluZ1tdKSB7XG4gIGlmICghZXJyLm1lc3NhZ2UubWF0Y2goJ2ZldGNoJykpIGNvbnNvbGUuZXJyb3IoZXJyKVxuXG4gIGNvbnNvbGUuZXJyb3IoXG4gICAgYFtobXJdIEZhaWxlZCB0byByZWxvYWQgJHtwYXRofS4gYCArXG4gICAgICAnVGhpcyBjb3VsZCBiZSBkdWUgdG8gc3ludGF4IGVycm9ycyBvciBpbXBvcnRpbmcgbm9uLWV4aXN0ZW50ICcgK1xuICAgICAgJ21vZHVsZXMuIChzZWUgZXJyb3JzIGFib3ZlKScsXG4gIClcbn1cblxuZnVuY3Rpb24gY2xlYW5VcmwocGF0aG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IHVybCA9IG5ldyBVUkwocGF0aG5hbWUsIGxvY2F0aW9uLnRvU3RyaW5nKCkpXG4gIHVybC5zZWFyY2hQYXJhbXMuZGVsZXRlKCdkaXJlY3QnKVxuICByZXR1cm4gdXJsLnBhdGhuYW1lICsgdXJsLnNlYXJjaFxufVxuXG5sZXQgaXNGaXJzdFVwZGF0ZSA9IHRydWVcblxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlTWVzc2FnZShwYXlsb2FkOiBITVJQYXlsb2FkKSB7XG4gIHN3aXRjaCAocGF5bG9hZC50eXBlKSB7XG4gICAgY2FzZSAnY29ubmVjdGVkJzpcbiAgICAgIGNvbnNvbGUuZGVidWcoJ1t2aXRlXSBjb25uZWN0ZWQuJylcbiAgICAgIHNlbmRNZXNzYWdlQnVmZmVyKClcbiAgICAgIC8vIHByb3h5KG5naW54LCBkb2NrZXIpIGhtciB3cyBtYXliZSBjYXVzZWQgdGltZW91dCxcbiAgICAgIC8vIHNvIHNlbmQgcGluZyBwYWNrYWdlIGxldCB3cyBrZWVwIGFsaXZlLlxuICAgICAgc2V0SW50ZXJ2YWwoKCkgPT4gc29ja2V0LnNlbmQoJ3tcInR5cGVcIjpcInBpbmdcIn0nKSwgNTAwMClcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAndXBkYXRlJzpcbiAgICAgIG5vdGlmeUxpc3RlbmVycygndml0ZTpiZWZvcmVVcGRhdGUnLCBwYXlsb2FkKVxuICAgICAgLy8gaWYgdGhpcyBpcyB0aGUgZmlyc3QgdXBkYXRlIGFuZCB0aGVyZSdzIGFscmVhZHkgYW4gZXJyb3Igb3ZlcmxheSwgaXRcbiAgICAgIC8vIG1lYW5zIHRoZSBwYWdlIG9wZW5lZCB3aXRoIGV4aXN0aW5nIHNlcnZlciBjb21waWxlIGVycm9yIGFuZCB0aGUgd2hvbGVcbiAgICAgIC8vIG1vZHVsZSBzY3JpcHQgZmFpbGVkIHRvIGxvYWQgKHNpbmNlIG9uZSBvZiB0aGUgbmVzdGVkIGltcG9ydHMgaXMgNTAwKS5cbiAgICAgIC8vIGluIHRoaXMgY2FzZSBhIG5vcm1hbCB1cGRhdGUgd29uJ3Qgd29yayBhbmQgYSBmdWxsIHJlbG9hZCBpcyBuZWVkZWQuXG4gICAgICBpZiAoaXNGaXJzdFVwZGF0ZSAmJiBoYXNFcnJvck92ZXJsYXkoKSkge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcbiAgICAgICAgcmV0dXJuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjbGVhckVycm9yT3ZlcmxheSgpXG4gICAgICAgIGlzRmlyc3RVcGRhdGUgPSBmYWxzZVxuICAgICAgfVxuICAgICAgcGF5bG9hZC51cGRhdGVzLmZvckVhY2goKHVwZGF0ZSkgPT4ge1xuICAgICAgICBpZiAodXBkYXRlLnR5cGUgPT09ICdqcy11cGRhdGUnKSB7XG4gICAgICAgICAgcXVldWVVcGRhdGUoZmV0Y2hVcGRhdGUodXBkYXRlKSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBjc3MtdXBkYXRlXG4gICAgICAgICAgLy8gdGhpcyBpcyBvbmx5IHNlbnQgd2hlbiBhIGNzcyBmaWxlIHJlZmVyZW5jZWQgd2l0aCA8bGluaz4gaXMgdXBkYXRlZFxuICAgICAgICAgIGNvbnN0IHsgcGF0aCwgdGltZXN0YW1wIH0gPSB1cGRhdGVcbiAgICAgICAgICBjb25zdCBzZWFyY2hVcmwgPSBjbGVhblVybChwYXRoKVxuICAgICAgICAgIC8vIGNhbid0IHVzZSBxdWVyeVNlbGVjdG9yIHdpdGggYFtocmVmKj1dYCBoZXJlIHNpbmNlIHRoZSBsaW5rIG1heSBiZVxuICAgICAgICAgIC8vIHVzaW5nIHJlbGF0aXZlIHBhdGhzIHNvIHdlIG5lZWQgdG8gdXNlIGxpbmsuaHJlZiB0byBncmFiIHRoZSBmdWxsXG4gICAgICAgICAgLy8gVVJMIGZvciB0aGUgaW5jbHVkZSBjaGVjay5cbiAgICAgICAgICBjb25zdCBlbCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbDxIVE1MTGlua0VsZW1lbnQ+KCdsaW5rJykpLmZpbmQoKGUpID0+XG4gICAgICAgICAgICBjbGVhblVybChlLmhyZWYpLmluY2x1ZGVzKHNlYXJjaFVybCksXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmIChlbCkge1xuICAgICAgICAgICAgY29uc3QgbmV3UGF0aCA9IGAke2Jhc2V9JHtzZWFyY2hVcmwuc2xpY2UoMSl9JHtcbiAgICAgICAgICAgICAgc2VhcmNoVXJsLmluY2x1ZGVzKCc/JykgPyAnJicgOiAnPydcbiAgICAgICAgICAgIH10PSR7dGltZXN0YW1wfWBcbiAgICAgICAgICAgIGVsLmhyZWYgPSBuZXcgVVJMKG5ld1BhdGgsIGVsLmhyZWYpLmhyZWZcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc29sZS5sb2coYFt2aXRlXSBjc3MgaG90IHVwZGF0ZWQ6ICR7c2VhcmNoVXJsfWApXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBicmVha1xuICAgIGNhc2UgJ2N1c3RvbSc6IHtcbiAgICAgIG5vdGlmeUxpc3RlbmVycyhwYXlsb2FkLmV2ZW50LCBwYXlsb2FkLmRhdGEpXG4gICAgICBicmVha1xuICAgIH1cbiAgICBjYXNlICdmdWxsLXJlbG9hZCc6XG4gICAgICBub3RpZnlMaXN0ZW5lcnMoJ3ZpdGU6YmVmb3JlRnVsbFJlbG9hZCcsIHBheWxvYWQpXG4gICAgICBpZiAocGF5bG9hZC5wYXRoICYmIHBheWxvYWQucGF0aC5lbmRzV2l0aCgnLmh0bWwnKSkge1xuICAgICAgICAvLyBpZiBodG1sIGZpbGUgaXMgZWRpdGVkLCBvbmx5IHJlbG9hZCB0aGUgcGFnZSBpZiB0aGUgYnJvd3NlciBpc1xuICAgICAgICAvLyBjdXJyZW50bHkgb24gdGhhdCBwYWdlLlxuICAgICAgICBjb25zdCBwYWdlUGF0aCA9IGRlY29kZVVSSShsb2NhdGlvbi5wYXRobmFtZSlcbiAgICAgICAgY29uc3QgcGF5bG9hZFBhdGggPSBiYXNlICsgcGF5bG9hZC5wYXRoLnNsaWNlKDEpXG4gICAgICAgIGlmIChcbiAgICAgICAgICBwYWdlUGF0aCA9PT0gcGF5bG9hZFBhdGggfHxcbiAgICAgICAgICBwYXlsb2FkLnBhdGggPT09ICcvaW5kZXguaHRtbCcgfHxcbiAgICAgICAgICAocGFnZVBhdGguZW5kc1dpdGgoJy8nKSAmJiBgJHtwYWdlUGF0aH1pbmRleC5odG1sYCA9PT0gcGF5bG9hZFBhdGgpXG4gICAgICAgIClcbiAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9jYXRpb24ucmVsb2FkKClcbiAgICAgIH1cbiAgICAgIGJyZWFrXG4gICAgY2FzZSAncHJ1bmUnOlxuICAgICAgbm90aWZ5TGlzdGVuZXJzKCd2aXRlOmJlZm9yZVBydW5lJywgcGF5bG9hZClcbiAgICAgIC8vIEFmdGVyIGFuIEhNUiB1cGRhdGUsIHNvbWUgbW9kdWxlcyBhcmUgbm8gbG9uZ2VyIGltcG9ydGVkIG9uIHRoZSBwYWdlXG4gICAgICAvLyBidXQgdGhleSBtYXkgaGF2ZSBsZWZ0IGJlaGluZCBzaWRlIGVmZmVjdHMgdGhhdCBuZWVkIHRvIGJlIGNsZWFuZWQgdXBcbiAgICAgIC8vICguZS5nIHN0eWxlIGluamVjdGlvbnMpXG4gICAgICAvLyBUT0RPIFRyaWdnZXIgdGhlaXIgZGlzcG9zZSBjYWxsYmFja3MuXG4gICAgICBwYXlsb2FkLnBhdGhzLmZvckVhY2goKHBhdGgpID0+IHtcbiAgICAgICAgY29uc3QgZm4gPSBwcnVuZU1hcC5nZXQocGF0aClcbiAgICAgICAgaWYgKGZuKSBmbihkYXRhTWFwLmdldChwYXRoKSlcbiAgICAgIH0pXG4gICAgICBicmVha1xuICAgIGNhc2UgJ2Vycm9yJzoge1xuICAgICAgbm90aWZ5TGlzdGVuZXJzKCd2aXRlOmVycm9yJywgcGF5bG9hZClcbiAgICAgIGNvbnN0IGVyciA9IHBheWxvYWQuZXJyXG4gICAgICBpZiAoZW5hYmxlT3ZlcmxheSkgY3JlYXRlRXJyb3JPdmVybGF5KGVycilcbiAgICAgIGVsc2UgY29uc29sZS5lcnJvcihgW3ZpdGVdIEludGVybmFsIFNlcnZlciBFcnJvclxcbiR7ZXJyLm1lc3NhZ2V9XFxuJHtlcnIuc3RhY2t9YClcblxuICAgICAgYnJlYWtcbiAgICB9XG4gICAgZGVmYXVsdDoge1xuICAgICAgY29uc3QgY2hlY2s6IG5ldmVyID0gcGF5bG9hZFxuICAgICAgcmV0dXJuIGNoZWNrXG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIG5vdGlmeUxpc3RlbmVyczxUIGV4dGVuZHMgc3RyaW5nPihldmVudDogVCwgZGF0YTogSW5mZXJDdXN0b21FdmVudFBheWxvYWQ8VD4pOiB2b2lkXG5mdW5jdGlvbiBub3RpZnlMaXN0ZW5lcnMoZXZlbnQ6IHN0cmluZywgZGF0YTogYW55KTogdm9pZCB7XG4gIGNvbnN0IGNicyA9IGN1c3RvbUxpc3RlbmVyc01hcC5nZXQoZXZlbnQpXG4gIGlmIChjYnMpIGNicy5mb3JFYWNoKChjYikgPT4gY2IoZGF0YSkpXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUVycm9yT3ZlcmxheShfZXJyOiBFcnJvclBheWxvYWRbJ2VyciddKSB7XG4gIGlmICghZW5hYmxlT3ZlcmxheSkgcmV0dXJuXG4gIGNsZWFyRXJyb3JPdmVybGF5KClcbiAgLy8gZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChuZXcgRXJyb3JPdmVybGF5KGVycikpXG59XG5cbmZ1bmN0aW9uIGNsZWFyRXJyb3JPdmVybGF5KCkge1xuICAvLyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKG92ZXJsYXlJZCkuZm9yRWFjaChuID0+IChuIGFzIEVycm9yT3ZlcmxheSkuY2xvc2UoKSlcbn1cblxuZnVuY3Rpb24gaGFzRXJyb3JPdmVybGF5KCkge1xuICAvLyByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChvdmVybGF5SWQpLmxlbmd0aFxuICByZXR1cm4gZmFsc2Vcbn1cblxubGV0IHBlbmRpbmcgPSBmYWxzZVxubGV0IHF1ZXVlZDogUHJvbWlzZTwoKCkgPT4gdm9pZCkgfCB1bmRlZmluZWQ+W10gPSBbXVxuXG4vKipcbiAqIGJ1ZmZlciBtdWx0aXBsZSBob3QgdXBkYXRlcyB0cmlnZ2VyZWQgYnkgdGhlIHNhbWUgc3JjIGNoYW5nZVxuICogc28gdGhhdCB0aGV5IGFyZSBpbnZva2VkIGluIHRoZSBzYW1lIG9yZGVyIHRoZXkgd2VyZSBzZW50LlxuICogKG90aGVyd2lzZSB0aGUgb3JkZXIgbWF5IGJlIGluY29uc2lzdGVudCBiZWNhdXNlIG9mIHRoZSBodHRwIHJlcXVlc3Qgcm91bmQgdHJpcClcbiAqL1xuYXN5bmMgZnVuY3Rpb24gcXVldWVVcGRhdGUocDogUHJvbWlzZTwoKCkgPT4gdm9pZCkgfCB1bmRlZmluZWQ+KSB7XG4gIHF1ZXVlZC5wdXNoKHApXG4gIGlmICghcGVuZGluZykge1xuICAgIHBlbmRpbmcgPSB0cnVlXG4gICAgYXdhaXQgUHJvbWlzZS5yZXNvbHZlKClcbiAgICBwZW5kaW5nID0gZmFsc2VcbiAgICBjb25zdCBsb2FkaW5nID0gWy4uLnF1ZXVlZF1cbiAgICBxdWV1ZWQgPSBbXVxuICAgIDsoYXdhaXQgUHJvbWlzZS5hbGwobG9hZGluZykpLmZvckVhY2goKGZuKSA9PiBmbiAmJiBmbigpKVxuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHdhaXRGb3JTdWNjZXNzZnVsUGluZyhtcyA9IDEwMDApIHtcbiAgd2hpbGUgKHRydWUpIHtcbiAgICB0cnkge1xuICAgICAgLy8gQSBmZXRjaCBvbiBhIHdlYnNvY2tldCBVUkwgd2lsbCByZXR1cm4gYSBzdWNjZXNzZnVsIHByb21pc2Ugd2l0aCBzdGF0dXMgNDAwLFxuICAgICAgLy8gYnV0IHdpbGwgcmVqZWN0IGEgbmV0d29ya2luZyBlcnJvci5cbiAgICAgIGF3YWl0IGZldGNoKGAke2xvY2F0aW9uLnByb3RvY29sfS8vJHtzb2NrZXRIb3N0fWApXG4gICAgICBicmVha1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIHdhaXQgbXMgYmVmb3JlIGF0dGVtcHRpbmcgdG8gcGluZyBhZ2FpblxuICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKVxuICAgIH1cbiAgfVxufVxuXG4vLyBodHRwczovL3dpY2cuZ2l0aHViLmlvL2NvbnN0cnVjdC1zdHlsZXNoZWV0c1xuY29uc3Qgc3VwcG9ydHNDb25zdHJ1Y3RlZFNoZWV0ID0gKCgpID0+IHtcbiAgLy8gVE9ETzogcmUtZW5hYmxlIHRoaXMgdHJ5IGJsb2NrIG9uY2UgQ2hyb21lIGZpeGVzIHRoZSBwZXJmb3JtYW5jZSBvZlxuICAvLyBydWxlIGluc2VydGlvbiBpbiByZWFsbHkgYmlnIHN0eWxlc2hlZXRzXG4gIC8vIHRyeSB7XG4gIC8vICAgbmV3IENTU1N0eWxlU2hlZXQoKVxuICAvLyAgIHJldHVybiB0cnVlXG4gIC8vIH0gY2F0Y2ggKGUpIHt9XG4gIHJldHVybiBmYWxzZVxufSkoKVxuXG5jb25zdCBzaGVldHNNYXAgPSBuZXcgTWFwKClcblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVN0eWxlKGlkOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZyk6IHZvaWQge1xuICBsZXQgc3R5bGUgPSBzaGVldHNNYXAuZ2V0KGlkKVxuICBpZiAoc3VwcG9ydHNDb25zdHJ1Y3RlZFNoZWV0ICYmICFjb250ZW50LmluY2x1ZGVzKCdAaW1wb3J0JykpIHtcbiAgICBpZiAoc3R5bGUgJiYgIShzdHlsZSBpbnN0YW5jZW9mIENTU1N0eWxlU2hlZXQpKSB7XG4gICAgICByZW1vdmVTdHlsZShpZClcbiAgICAgIHN0eWxlID0gdW5kZWZpbmVkXG4gICAgfVxuXG4gICAgaWYgKCFzdHlsZSkge1xuICAgICAgc3R5bGUgPSBuZXcgQ1NTU3R5bGVTaGVldCgpXG4gICAgICBzdHlsZS5yZXBsYWNlU3luYyhjb250ZW50KVxuICAgICAgZG9jdW1lbnQuYWRvcHRlZFN0eWxlU2hlZXRzID0gWy4uLmRvY3VtZW50LmFkb3B0ZWRTdHlsZVNoZWV0cywgc3R5bGVdXG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlLnJlcGxhY2VTeW5jKGNvbnRlbnQpXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChzdHlsZSAmJiAhKHN0eWxlIGluc3RhbmNlb2YgSFRNTFN0eWxlRWxlbWVudCkpIHtcbiAgICAgIHJlbW92ZVN0eWxlKGlkKVxuICAgICAgc3R5bGUgPSB1bmRlZmluZWRcbiAgICB9XG5cbiAgICBpZiAoIXN0eWxlKSB7XG4gICAgICBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJylcbiAgICAgIHN0eWxlLnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0L2NzcycpXG4gICAgICBzdHlsZS5pbm5lckhUTUwgPSBjb250ZW50XG4gICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKVxuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZS5pbm5lckhUTUwgPSBjb250ZW50XG4gICAgfVxuICB9XG4gIHNoZWV0c01hcC5zZXQoaWQsIHN0eWxlKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlU3R5bGUoaWQ6IHN0cmluZyk6IHZvaWQge1xuICBjb25zdCBzdHlsZSA9IHNoZWV0c01hcC5nZXQoaWQpXG4gIGlmIChzdHlsZSkge1xuICAgIGlmIChzdHlsZSBpbnN0YW5jZW9mIENTU1N0eWxlU2hlZXQpXG4gICAgICBkb2N1bWVudC5hZG9wdGVkU3R5bGVTaGVldHMgPSBkb2N1bWVudC5hZG9wdGVkU3R5bGVTaGVldHMuZmlsdGVyKFxuICAgICAgICAoczogQ1NTU3R5bGVTaGVldCkgPT4gcyAhPT0gc3R5bGUsXG4gICAgICApXG4gICAgZWxzZSBkb2N1bWVudC5oZWFkLnJlbW92ZUNoaWxkKHN0eWxlKVxuXG4gICAgc2hlZXRzTWFwLmRlbGV0ZShpZClcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBmZXRjaFVwZGF0ZSh7IHBhdGgsIGFjY2VwdGVkUGF0aCwgdGltZXN0YW1wIH06IFVwZGF0ZSkge1xuICBsZXQgbW9kID0gaG90TW9kdWxlc01hcC5nZXQocGF0aClcbiAgaWYgKCFtb2QpIHtcbiAgICBtb2QgPSBob3RNb2R1bGVzTWFwLmdldChwYXRoLnJlcGxhY2UoL1xcLmpzJC8sICcnKSlcblxuICAgIGlmICghbW9kKSB7XG4gICAgICAvLyBJbiBhIGNvZGUtc3BsaXR0aW5nIHByb2plY3QsXG4gICAgICAvLyBpdCBpcyBjb21tb24gdGhhdCB0aGUgaG90LXVwZGF0aW5nIG1vZHVsZSBpcyBub3QgbG9hZGVkIHlldC5cbiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS92aXRlanMvdml0ZS9pc3N1ZXMvNzIxXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBwYXRoID0gcGF0aC5yZXBsYWNlKC9cXC5qcyQvLCAnJylcbiAgICBhY2NlcHRlZFBhdGggPSBhY2NlcHRlZFBhdGgucmVwbGFjZSgvXFwuanMkLywgJycpXG4gIH1cblxuICBjb25zdCBtb2R1bGVNYXAgPSBuZXcgTWFwKClcbiAgY29uc3QgaXNTZWxmVXBkYXRlID0gcGF0aCA9PT0gYWNjZXB0ZWRQYXRoXG5cbiAgLy8gbWFrZSBzdXJlIHdlIG9ubHkgaW1wb3J0IGVhY2ggZGVwIG9uY2VcbiAgY29uc3QgbW9kdWxlc1RvVXBkYXRlID0gbmV3IFNldDxzdHJpbmc+KClcbiAgaWYgKGlzU2VsZlVwZGF0ZSkge1xuICAgIC8vIHNlbGYgdXBkYXRlIC0gb25seSB1cGRhdGUgc2VsZlxuICAgIG1vZHVsZXNUb1VwZGF0ZS5hZGQocGF0aClcbiAgfSBlbHNlIHtcbiAgICAvLyBkZXAgdXBkYXRlXG4gICAgZm9yIChjb25zdCB7IGRlcHMgfSBvZiBtb2QuY2FsbGJhY2tzKSB7XG4gICAgICBkZXBzLmZvckVhY2goKGRlcCkgPT4ge1xuICAgICAgICBpZiAoYWNjZXB0ZWRQYXRoID09PSBkZXApIG1vZHVsZXNUb1VwZGF0ZS5hZGQoZGVwKVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvLyBkZXRlcm1pbmUgdGhlIHF1YWxpZmllZCBjYWxsYmFja3MgYmVmb3JlIHdlIHJlLWltcG9ydCB0aGUgbW9kdWxlc1xuICBjb25zdCBxdWFsaWZpZWRDYWxsYmFja3MgPSBtb2QuY2FsbGJhY2tzLmZpbHRlcigoeyBkZXBzIH0pID0+IHtcbiAgICByZXR1cm4gZGVwcy5zb21lKChkZXApID0+IG1vZHVsZXNUb1VwZGF0ZS5oYXMoZGVwKSlcbiAgfSlcblxuICBhd2FpdCBQcm9taXNlLmFsbChcbiAgICBBcnJheS5mcm9tKG1vZHVsZXNUb1VwZGF0ZSkubWFwKGFzeW5jIChkZXApID0+IHtcbiAgICAgIGNvbnN0IGRpc3Bvc2VyID0gZGlzcG9zZU1hcC5nZXQoZGVwKVxuICAgICAgaWYgKGRpc3Bvc2VyKSBhd2FpdCBkaXNwb3NlcihkYXRhTWFwLmdldChkZXApKVxuICAgICAgY29uc3QgW3BhdGgsIHF1ZXJ5XSA9IGRlcC5zcGxpdCgnPycpXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBuZXdNb2QgPSBhd2FpdCBpbXBvcnQoXG4gICAgICAgICAgLyogQHZpdGUtaWdub3JlICovXG4gICAgICAgICAgbm9ybWFsaXplU2NyaXB0VXJsKGAke2Jhc2UgKyBwYXRoLnNsaWNlKDEpfS5qcyR7cXVlcnkgPyBgXyR7cXVlcnl9YCA6ICcnfWAsIHRpbWVzdGFtcClcbiAgICAgICAgKVxuICAgICAgICBtb2R1bGVNYXAuc2V0KGRlcCwgbmV3TW9kKVxuICAgICAgfSBjYXRjaCAoZTogYW55KSB7XG4gICAgICAgIHdhcm5GYWlsZWRGZXRjaChlLCBkZXApXG4gICAgICB9XG4gICAgfSksXG4gIClcblxuICByZXR1cm4gKCkgPT4ge1xuICAgIGZvciAoY29uc3QgeyBkZXBzLCBmbiB9IG9mIHF1YWxpZmllZENhbGxiYWNrcykgZm4oZGVwcy5tYXAoKGRlcCkgPT4gbW9kdWxlTWFwLmdldChkZXApKSlcblxuICAgIGNvbnN0IGxvZ2dlZFBhdGggPSBpc1NlbGZVcGRhdGUgPyBwYXRoIDogYCR7YWNjZXB0ZWRQYXRofSB2aWEgJHtwYXRofWBcbiAgICBjb25zb2xlLmxvZyhgW3ZpdGVdIGhvdCB1cGRhdGVkOiAke2xvZ2dlZFBhdGh9YClcbiAgfVxufVxuXG5mdW5jdGlvbiBub3JtYWxpemVTY3JpcHRVcmwodXJsOiBzdHJpbmcsIHRpbWVzdGFtcDogbnVtYmVyKSB7XG4gIGlmICghdXJsLmVuZHNXaXRoKCcuanMnKSAmJiAhdXJsLmVuZHNXaXRoKCcubWpzJykpIHVybCA9IGAke3VybH0uanNgXG4gIHJldHVybiBgJHt1cmx9P3Q9JHt0aW1lc3RhbXB9YFxufVxuXG5mdW5jdGlvbiBzZW5kTWVzc2FnZUJ1ZmZlcigpIHtcbiAgaWYgKHNvY2tldC5yZWFkeVN0YXRlID09PSAxKSB7XG4gICAgbWVzc2FnZUJ1ZmZlci5mb3JFYWNoKChtc2cpID0+IHNvY2tldC5zZW5kKG1zZykpXG4gICAgbWVzc2FnZUJ1ZmZlci5sZW5ndGggPSAwXG4gIH1cbn1cblxuaW50ZXJmYWNlIEhvdE1vZHVsZSB7XG4gIGlkOiBzdHJpbmdcbiAgY2FsbGJhY2tzOiBIb3RDYWxsYmFja1tdXG59XG5cbmludGVyZmFjZSBIb3RDYWxsYmFjayB7XG4gIC8vIHRoZSBkZXBlbmRlbmNpZXMgbXVzdCBiZSBmZXRjaGFibGUgcGF0aHNcbiAgZGVwczogc3RyaW5nW11cbiAgZm46IChtb2R1bGVzOiBvYmplY3RbXSkgPT4gdm9pZFxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSG90Q29udGV4dChvd25lclBhdGg6IHN0cmluZyk6IFZpdGVIb3RDb250ZXh0IHtcbiAgaWYgKCFkYXRhTWFwLmhhcyhvd25lclBhdGgpKSBkYXRhTWFwLnNldChvd25lclBhdGgsIHt9KVxuXG4gIC8vIHdoZW4gYSBmaWxlIGlzIGhvdCB1cGRhdGVkLCBhIG5ldyBjb250ZXh0IGlzIGNyZWF0ZWRcbiAgLy8gY2xlYXIgaXRzIHN0YWxlIGNhbGxiYWNrc1xuICBjb25zdCBtb2QgPSBob3RNb2R1bGVzTWFwLmdldChvd25lclBhdGgpXG4gIGlmIChtb2QpIG1vZC5jYWxsYmFja3MgPSBbXVxuXG4gIC8vIGNsZWFyIHN0YWxlIGN1c3RvbSBldmVudCBsaXN0ZW5lcnNcbiAgY29uc3Qgc3RhbGVMaXN0ZW5lcnMgPSBjdHhUb0xpc3RlbmVyc01hcC5nZXQob3duZXJQYXRoKVxuICBpZiAoc3RhbGVMaXN0ZW5lcnMpIHtcbiAgICBmb3IgKGNvbnN0IFtldmVudCwgc3RhbGVGbnNdIG9mIHN0YWxlTGlzdGVuZXJzKSB7XG4gICAgICBjb25zdCBsaXN0ZW5lcnMgPSBjdXN0b21MaXN0ZW5lcnNNYXAuZ2V0KGV2ZW50KVxuICAgICAgaWYgKGxpc3RlbmVycykge1xuICAgICAgICBjdXN0b21MaXN0ZW5lcnNNYXAuc2V0KFxuICAgICAgICAgIGV2ZW50LFxuICAgICAgICAgIGxpc3RlbmVycy5maWx0ZXIoKGwpID0+ICFzdGFsZUZucy5pbmNsdWRlcyhsKSksXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjb25zdCBuZXdMaXN0ZW5lcnMgPSBuZXcgTWFwKClcbiAgY3R4VG9MaXN0ZW5lcnNNYXAuc2V0KG93bmVyUGF0aCwgbmV3TGlzdGVuZXJzKVxuXG4gIGZ1bmN0aW9uIGFjY2VwdERlcHMoZGVwczogc3RyaW5nW10sIGNhbGxiYWNrOiBIb3RDYWxsYmFja1snZm4nXSA9ICgpID0+IHt9KSB7XG4gICAgY29uc3QgbW9kOiBIb3RNb2R1bGUgPSBob3RNb2R1bGVzTWFwLmdldChvd25lclBhdGgpIHx8IHtcbiAgICAgIGlkOiBvd25lclBhdGgsXG4gICAgICBjYWxsYmFja3M6IFtdLFxuICAgIH1cbiAgICBtb2QuY2FsbGJhY2tzLnB1c2goe1xuICAgICAgZGVwcyxcbiAgICAgIGZuOiBjYWxsYmFjayxcbiAgICB9KVxuICAgIGhvdE1vZHVsZXNNYXAuc2V0KG93bmVyUGF0aCwgbW9kKVxuICB9XG5cbiAgY29uc3QgaG90OiBWaXRlSG90Q29udGV4dCA9IHtcbiAgICBnZXQgZGF0YSgpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdWaXRlSG90Q29udGV4dCBkYXRhJywgeyBkYXRhTWFwLCBvd25lclBhdGggfSlcbiAgICAgIHJldHVybiBkYXRhTWFwLmdldChvd25lclBhdGgpXG4gICAgfSxcblxuICAgIGFjY2VwdChkZXBzPzogYW55LCBjYWxsYmFjaz86IGFueSkge1xuICAgICAgaWYgKHR5cGVvZiBkZXBzID09PSAnZnVuY3Rpb24nIHx8ICFkZXBzKSB7XG4gICAgICAgIC8vIHNlbGYtYWNjZXB0OiBob3QuYWNjZXB0KCgpID0+IHt9KVxuICAgICAgICBhY2NlcHREZXBzKFtvd25lclBhdGhdLCAoW21vZF0pID0+IGRlcHMgJiYgZGVwcyhtb2QpKVxuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZGVwcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgLy8gZXhwbGljaXQgZGVwc1xuICAgICAgICBhY2NlcHREZXBzKFtkZXBzXSwgKFttb2RdKSA9PiBjYWxsYmFjayAmJiBjYWxsYmFjayhtb2QpKVxuICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGRlcHMpKSB7XG4gICAgICAgIGFjY2VwdERlcHMoZGVwcywgY2FsbGJhY2spXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbnZhbGlkIGhvdC5hY2NlcHQoKSB1c2FnZS4nKVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBkaXNwb3NlKGNiKSB7XG4gICAgICBkaXNwb3NlTWFwLnNldChvd25lclBhdGgsIGNiKVxuICAgIH0sXG5cbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIHVudHlwZWRcbiAgICBwcnVuZShjYjogKGRhdGE6IGFueSkgPT4gdm9pZCkge1xuICAgICAgcHJ1bmVNYXAuc2V0KG93bmVyUGF0aCwgY2IpXG4gICAgfSxcblxuICAgIC8vIFRPRE9cblxuICAgIGRlY2xpbmUoKSB7fSxcblxuICAgIGludmFsaWRhdGUoKSB7XG4gICAgICAvLyBUT0RPIHNob3VsZCB0ZWxsIHRoZSBzZXJ2ZXIgdG8gcmUtcGVyZm9ybSBobXIgcHJvcGFnYXRpb25cbiAgICAgIC8vIGZyb20gdGhpcyBtb2R1bGUgYXMgcm9vdFxuICAgICAgbG9jYXRpb24ucmVsb2FkKClcbiAgICB9LFxuXG4gICAgLy8gY3VzdG9tIGV2ZW50c1xuICAgIG9uKGV2ZW50LCBjYikge1xuICAgICAgY29uc3QgYWRkVG9NYXAgPSAobWFwOiBNYXA8c3RyaW5nLCBhbnlbXT4pID0+IHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBtYXAuZ2V0KGV2ZW50KSB8fCBbXVxuICAgICAgICBleGlzdGluZy5wdXNoKGNiKVxuICAgICAgICBtYXAuc2V0KGV2ZW50LCBleGlzdGluZylcbiAgICAgIH1cbiAgICAgIGFkZFRvTWFwKGN1c3RvbUxpc3RlbmVyc01hcClcbiAgICAgIGFkZFRvTWFwKG5ld0xpc3RlbmVycylcbiAgICB9LFxuXG4gICAgc2VuZChldmVudCwgZGF0YSkge1xuICAgICAgbWVzc2FnZUJ1ZmZlci5wdXNoKEpTT04uc3RyaW5naWZ5KHsgdHlwZTogJ2N1c3RvbScsIGV2ZW50LCBkYXRhIH0pKVxuICAgICAgc2VuZE1lc3NhZ2VCdWZmZXIoKVxuICAgIH0sXG4gIH1cblxuICByZXR1cm4gaG90XG59XG5cbi8qKlxuICogdXJscyBoZXJlIGFyZSBkeW5hbWljIGltcG9ydCgpIHVybHMgdGhhdCBjb3VsZG4ndCBiZSBzdGF0aWNhbGx5IGFuYWx5emVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmplY3RRdWVyeSh1cmw6IHN0cmluZywgcXVlcnlUb0luamVjdDogc3RyaW5nKTogc3RyaW5nIHtcbiAgLy8gc2tpcCB1cmxzIHRoYXQgd29uJ3QgYmUgaGFuZGxlZCBieSB2aXRlXG4gIGlmICghdXJsLnN0YXJ0c1dpdGgoJy4nKSAmJiAhdXJsLnN0YXJ0c1dpdGgoJy8nKSkgcmV0dXJuIHVybFxuXG4gIC8vIGNhbid0IHVzZSBwYXRobmFtZSBmcm9tIFVSTCBzaW5jZSBpdCBtYXkgYmUgcmVsYXRpdmUgbGlrZSAuLi9cbiAgY29uc3QgcGF0aG5hbWUgPSB1cmwucmVwbGFjZSgvIy4qJC8sICcnKS5yZXBsYWNlKC9cXD8uKiQvLCAnJylcbiAgY29uc3QgeyBzZWFyY2gsIGhhc2ggfSA9IG5ldyBVUkwodXJsLCAnaHR0cDovL3ZpdGVqcy5kZXYnKVxuXG4gIHJldHVybiBgJHtwYXRobmFtZX0/JHtxdWVyeVRvSW5qZWN0fSR7c2VhcmNoID8gYCYke3NlYXJjaC5zbGljZSgxKX1gIDogJyd9JHtoYXNoIHx8ICcnfWBcbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7QUFNQSxRQUFRLE1BQU0sc0JBQXNCO0FBR3BDLElBQU0saUJBQWlCLFNBQVMsYUFBYSxXQUFXLFFBQVE7QUFDaEUsSUFBTSxhQUFhO0FBQ25CLElBQU0sT0FBTztBQUNiLElBQU0sZ0JBQTBCLENBQUM7QUFDakMsSUFBTSxnQkFBZ0I7QUFFdEIsSUFBTSxnQkFBZ0Isb0JBQUksSUFBdUI7QUFDakQsSUFBTSxhQUFhLG9CQUFJLElBQWlEO0FBQ3hFLElBQU0sV0FBVyxvQkFBSSxJQUFpRDtBQUN0RSxJQUFNLFVBQVUsb0JBQUksSUFBaUI7QUFDckMsSUFBTSxxQkFBcUIsb0JBQUksSUFBcUM7QUFDcEUsSUFBTSxvQkFBb0Isb0JBQUksSUFBa0Q7QUFFaEYsSUFBSTtBQUNKLElBQUk7QUFDRixXQUFTLElBQUksVUFBVSxHQUFHLG9CQUFvQixjQUFjLFVBQVU7QUFHdEUsU0FBTyxpQkFBaUIsV0FBVyxPQUFPLEVBQUUsS0FBSyxNQUFNO0FBQ3JELGtCQUFjLEtBQUssTUFBTSxJQUFJLENBQUM7QUFBQSxFQUNoQyxDQUFDO0FBR0QsU0FBTyxpQkFBaUIsU0FBUyxPQUFPLEVBQUUsU0FBUyxNQUFNO0FBQ3ZELFFBQUk7QUFBVTtBQUNkLFlBQVEsSUFBSSx1REFBdUQ7QUFDbkUsVUFBTSxzQkFBc0I7QUFDNUIsYUFBUyxPQUFPO0FBQUEsRUFDbEIsQ0FBQztBQUNILFNBQVMsT0FBUDtBQUNBLFVBQVEsTUFBTSwwQ0FBMEMsVUFBVTtBQUNwRTtBQUVBLFNBQVMsZ0JBQWdCLEtBQVksTUFBeUI7QUFDNUQsTUFBSSxDQUFDLElBQUksUUFBUSxNQUFNLE9BQU87QUFB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